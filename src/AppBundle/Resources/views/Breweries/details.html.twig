{% extends 'AppBundle::base.html.twig' %}

{% block headTitle %}
    {{ brewery.name ~ ' | ' ~ parent() }}
{% endblock %}

{% block breadcrumb %}
    <li><a href="{{ path('breweries_index') }}">Browary</a></li>
    <li>{{ brewery.name }}</li>
{% endblock %}

{% block pageContainer %}

    <section id="caps-card">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <h2>{{ brewery.name }}</h2>        
            <hr>
            <p>
                <span class="glyphicon glyphicon-time"></span> Dodany {{ brewery.createDate|date('Y-m-d H:i') }}
            </p>
            <hr>  
        </div>  
            
        {% if lat is not null and lng is not null %}   
        <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6" id="map-wrapper">              
            <div id="map"></div>
            <script>
            function initMap() {
                var myLatLng = {lat: {{ lat }}, lng: {{ lng }} };

                var map = new google.maps.Map(document.getElementById('map'), {
                    zoom: 12,
                    center: myLatLng
                });
                
                var contentString = '{{ brewery.name }}';
                
                var infowindow = new google.maps.InfoWindow({
                    content: contentString
                });

                var marker = new google.maps.Marker({
                    position: myLatLng,
                    map: map,
                    title: '{{ brewery.name }}'
                });
                
                marker.addListener('click', function() {
                    infowindow.open(map, marker);
                });
                
            }
            </script>
            <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCBSPNX08cXOYUZabQC6FjeZu0rQXJWzms&callback=initMap"></script>               
        </div> 
        {% endif %}
        <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">  
            {% if brewery.country is not null %}
                <p>{{ brewery.country.name }}</p>
            {% endif %}    
            <p>{{ brewery.postcode }}, {{ brewery.city }}</p>        
            <p>{{ brewery.address }}</p>
            <p>Kapsle: {{ brewery.caps|length }}</p>
        </div> 
        
        <div id="brewery-capses" class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> 
            <h4>Kapsle z tego browaru</h4>
            {% include 'AppBundle:Partials:listingCaps.html.twig' %}                
        </div>        
        
    </section>

{% endblock %}